<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MMIWG2S+ Story Map — North America</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css" />

  <link rel="stylesheet" href="./assets/styles.css" />

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" defer></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js" defer></script>
  <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js" defer></script>

  <script src="./assets/app.js" defer></script>
</head>

<body>
  <div id="app">
    <aside id="sidebar" aria-label="controls">
      <h1>MMIWG2S+ Story Map — North America</h1>
      <p class="lead">
        A narrative exploration of Missing and Murdered Indigenous Women, Girls, Two-Spirit, Transgender,
        and Gender-Diverse People. Filter, explore, and click stories to learn more.
      </p>

      <div class="stats" aria-label="summary stats">
        <div class="stat">
          <div class="small" id="statLeftLabel">Visible cases</div>
          <h3 id="statLeftValue">—</h3>
          <div class="small" id="statLeftNote">in current filters</div>
        </div>
        <div class="stat">
          <div class="small" id="statRightLabel">Time range</div>
          <h3 id="statRightValue">—</h3>
          <div class="small" id="statRightNote">in current filters</div>
        </div>
      </div>

      <canvas id="rateChart" style="margin-bottom: 12px; max-height: 140px;"></canvas>

      <div class="filters">
        <label for="yearRange">Show cases up to year: <span id="yearLabel">—</span></label>
        <div class="timeline">
          <input type="range" id="yearRange" min="1900" max="2026" value="2026" step="1">
        </div>

        <div class="twoCol" style="margin-top: 8px;">
          <select id="ethFilter" aria-label="ethnicity filter">
            <option value="all">All</option>
            <option value="Indigenous">Indigenous</option>
            <option value="Two-Spirit">Two-Spirit / Gender-Diverse</option>
            <option value="Unknown">Unknown</option>
          </select>

          <select id="statusFilter" aria-label="status filter">
            <option value="all">All statuses</option>
            <option value="Missing">Missing</option>
            <option value="Homicide">Homicide</option>
            <option value="Found">Found/Remains</option>
          </select>
        </div>

        <div style="margin-top: 8px;">
          <input id="q" placeholder="Search name, nation/tribe, location…" />
        </div>
      </div>

      <div class="controls">
        <button id="playBtn" class="btn">▶ Play timeline</button>
        <button id="resetBtn" class="btn">Reset view</button>
        <button id="downloadBtn" class="btn">Download filtered CSV</button>
      </div>

      <div id="chaptersList" class="chapters"></div>

      <footer>
        <p>
          This map is educational and not exhaustive. Verify sources and consult families before publishing.
          May 5 is recognized as a U.S. National Day of Awareness for MMIWR. :contentReference[oaicite:11]{index=11}
        </p>
      </footer>
    </aside>

    <div id="right">
      <div id="mapWrap">
        <div id="map"></div>

        <div class="legend" aria-label="legend">
          <div class="legendRow"><span class="dot dotInd"></span> Indigenous</div>
          <div class="legendRow"><span class="dot dot2s"></span> Two-Spirit / Gender-Diverse</div>
          <div class="legendRow"><span class="dot dotUnk"></span> Unknown/Other</div>
        </div>

        <div class="heat-toggle">
          <label class="btn">
            <input type="checkbox" id="heatCB" style="vertical-align:middle; margin:0 6px 0 0;">
            Heatmap
          </label>
        </div>

        <div class="big-overlay">
          <div class="notice" role="note" aria-label="ethics notice">
            <strong>Ethics & Data</strong>
            <p>
              This project maps sensitive stories. Use reputable sources, avoid doxxing,
              and honor correction/removal requests. Some databases include only subsets or active cases. :contentReference[oaicite:12]{index=12}
            </p>
          </div>
        </div>

      </div>
    </div>
  </div>
</body>
</html>
